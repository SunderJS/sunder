(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{74:function(e,t,r){"use strict";r.r(t),r.d(t,"frontMatter",(function(){return s})),r.d(t,"metadata",(function(){return i})),r.d(t,"rightToc",(function(){return l})),r.d(t,"default",(function(){return p}));var n=r(3),a=r(7),o=(r(0),r(91)),s={id:"middleware-router",title:"Router"},i={unversionedId:"middleware-router",id:"middleware-router",isDocsHomePage:!1,title:"Router",description:"A router helps you call different middleware based on the method and the URL of the request. Sunder ships with a default router that will work for most small to medium size applications.",source:"@site/docs/middleware-router.md",slug:"/middleware-router",permalink:"/docs/middleware-router",editUrl:"https://github.com/gzuidhof/sunder/edit/master/website/docs/middleware-router.md",version:"current",sidebar:"someSidebar",previous:{title:"Introduction to Middleware",permalink:"/docs/middleware-introduction"}},l=[{value:"Route parameters",id:"route-parameters",children:[]}],d={rightToc:l};function p(e){var t=e.components,r=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},d,r,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"A router helps you call different middleware based on the method and the URL of the request. Sunder ships with a default router that will work for most small to medium size applications."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-typescript"}),'import { Sunder, Router } from "sunder";\n\nconst app = new Sunder();\nconst router = new Router();\n\nfunction handleRobots(ctx: Context) {\n    ctx.response.body = "User-Agent: *\\nDisallow: /";\n}\n\nasync function createPostHandler(ctx: Context) {\n    // Talk to database, create a post..\n}\n\nasync function getPostHandler(ctx: Context<{id: string}>) {\n    const postId = ctx.params.id;\n    const postText = await myDatabase.getPost(id);\n    ctx.response.body = postText;\n}\n\n\nrouter.get("/robots.txt", handleRobots);\nrouter.post("/v1/posts", createPostHandler)\nrouter.get("/posts/:id", getPostHandler)\n\n// Tip: the router is usually the last middleware you add to the app.\napp.use(router.middleware)\n')),Object(o.b)("p",null,"In case a request is made to a non-existing page, a 404 error is thrown. "),Object(o.b)("p",null,"There is also a ",Object(o.b)("inlineCode",{parentName:"p"},"Router.all(path, handler)")," method that will catch all request methods (",Object(o.b)("inlineCode",{parentName:"p"},"GET"),", ",Object(o.b)("inlineCode",{parentName:"p"},"POST"),", ",Object(o.b)("inlineCode",{parentName:"p"},"PATCH"),", etc). "),Object(o.b)("h2",{id:"route-parameters"},"Route parameters"),Object(o.b)("p",null,"The router automatically extracts parameters from the URL, it is built upon the ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/pillarjs/path-to-regexp"}),Object(o.b)("inlineCode",{parentName:"a"},"path-to-regexp"))," library (the same as is used by ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://expressjs.com"}),"Express"),")."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Example")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-typescript"}),'function myHandler(ctx: Context<{firstName: string, lastName: string}>) {\n    ctx.response.body = `Hello ${ctx.params.firstName} ${ctx.params.lastName}!`;\n}\n\nconst router = new Router();\nrouter.get("/greeting/:firstName/:lastName", myHandler);\n\n// If I now make a request to /greeting/Bob/Dogg it will return\n// "Hello Bob Dogg"\n')),Object(o.b)("p",null,"Note how we write required parameters in the pointy brackets (",Object(o.b)("inlineCode",{parentName:"p"},"Context<{firstName: string}>"),") on the handler. This allows the route to be statically type checked. If you are using Javascript just remove this type annotation."))}p.isMDXComponent=!0}}]);